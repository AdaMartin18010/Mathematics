# ç®—æœ¯è¿ç®—ç¬¦ | Arithmetic Operators

## ğŸ“‹ ç›®å½• | Table of Contents

- [ç®—æœ¯è¿ç®—ç¬¦ | Arithmetic Operators](#ç®—æœ¯è¿ç®—ç¬¦--arithmetic-operators)
  - [ğŸ“‹ ç›®å½• | Table of Contents](#-ç›®å½•--table-of-contents)
  - [æ¦‚è¿° | Overview](#æ¦‚è¿°--overview)
  - [åŸºæœ¬ç®—æœ¯è¿ç®—ç¬¦ | Basic Arithmetic Operators](#åŸºæœ¬ç®—æœ¯è¿ç®—ç¬¦--basic-arithmetic-operators)
    - [1. åŠ æ³•è¿ç®—ç¬¦ | Addition Operator](#1-åŠ æ³•è¿ç®—ç¬¦--addition-operator)
    - [2. å‡æ³•è¿ç®—ç¬¦ | Subtraction Operator](#2-å‡æ³•è¿ç®—ç¬¦--subtraction-operator)
    - [3. ä¹˜æ³•è¿ç®—ç¬¦ | Multiplication Operator](#3-ä¹˜æ³•è¿ç®—ç¬¦--multiplication-operator)
    - [4. é™¤æ³•è¿ç®—ç¬¦ | Division Operator](#4-é™¤æ³•è¿ç®—ç¬¦--division-operator)
  - [é«˜çº§ç®—æœ¯è¿ç®—ç¬¦ | Advanced Arithmetic Operators](#é«˜çº§ç®—æœ¯è¿ç®—ç¬¦--advanced-arithmetic-operators)
    - [1. å–æ¨¡è¿ç®—ç¬¦ | Modulo Operator](#1-å–æ¨¡è¿ç®—ç¬¦--modulo-operator)
    - [2. å¹‚è¿ç®— | Exponentiation](#2-å¹‚è¿ç®—--exponentiation)
    - [3. ç»å¯¹å€¼ | Absolute Value](#3-ç»å¯¹å€¼--absolute-value)
  - [æ¯”è¾ƒè¿ç®—ç¬¦ | Comparison Operators](#æ¯”è¾ƒè¿ç®—ç¬¦--comparison-operators)
    - [1. ç›¸ç­‰æ€§æ¯”è¾ƒ | Equality Comparison](#1-ç›¸ç­‰æ€§æ¯”è¾ƒ--equality-comparison)
    - [2. å¤§å°æ¯”è¾ƒ | Size Comparison](#2-å¤§å°æ¯”è¾ƒ--size-comparison)
  - [è¿ç®—ç¬¦ä¼˜å…ˆçº§ | Operator Precedence](#è¿ç®—ç¬¦ä¼˜å…ˆçº§--operator-precedence)
    - [1. ä¼˜å…ˆçº§è§„åˆ™ | Precedence Rules](#1-ä¼˜å…ˆçº§è§„åˆ™--precedence-rules)
    - [2. æ‹¬å·ä½¿ç”¨ | Parentheses Usage](#2-æ‹¬å·ä½¿ç”¨--parentheses-usage)
  - [ç±»å‹ç›¸å…³è¿ç®—ç¬¦ | Type-Related Operators](#ç±»å‹ç›¸å…³è¿ç®—ç¬¦--type-related-operators)
    - [1. ç±»å‹è½¬æ¢ | Type Conversion](#1-ç±»å‹è½¬æ¢--type-conversion)
    - [2. ç±»å‹ç±»å®ä¾‹ | Type Class Instances](#2-ç±»å‹ç±»å®ä¾‹--type-class-instances)
  - [å®é™…åº”ç”¨ç¤ºä¾‹ | Practical Application Examples](#å®é™…åº”ç”¨ç¤ºä¾‹--practical-application-examples)
    - [1. æ•°å­¦å‡½æ•° | Mathematical Functions](#1-æ•°å­¦å‡½æ•°--mathematical-functions)
    - [2. ç»Ÿè®¡å‡½æ•° | Statistical Functions](#2-ç»Ÿè®¡å‡½æ•°--statistical-functions)
  - [æœ€ä½³å®è·µ | Best Practices](#æœ€ä½³å®è·µ--best-practices)
    - [1. è¿ç®—ç¬¦ä½¿ç”¨ | Operator Usage](#1-è¿ç®—ç¬¦ä½¿ç”¨--operator-usage)
    - [2. ç±»å‹å®‰å…¨ | Type Safety](#2-ç±»å‹å®‰å…¨--type-safety)
  - [ç›¸å…³é“¾æ¥ | Related Links](#ç›¸å…³é“¾æ¥--related-links)
  - [ç»ƒä¹  | Exercises](#ç»ƒä¹ --exercises)

## æ¦‚è¿° | Overview

Leanæä¾›äº†ä¸°å¯Œçš„ç®—æœ¯è¿ç®—ç¬¦ï¼Œæ”¯æŒè‡ªç„¶æ•°ã€æ•´æ•°ã€å®æ•°ç­‰ä¸åŒç±»å‹çš„æ•°å€¼è¿ç®—ã€‚è¿™äº›è¿ç®—ç¬¦æ˜¯æ•°å­¦è®¡ç®—å’Œè¯æ˜çš„åŸºç¡€ã€‚

Lean provides rich arithmetic operators supporting numerical operations on different types like natural numbers, integers, and real numbers. These operators are fundamental to mathematical computation and proof.

## åŸºæœ¬ç®—æœ¯è¿ç®—ç¬¦ | Basic Arithmetic Operators

### 1. åŠ æ³•è¿ç®—ç¬¦ | Addition Operator

```lean
-- è‡ªç„¶æ•°åŠ æ³• | Natural number addition
#eval 3 + 4  -- ç»“æœ: 7

-- æ•´æ•°åŠ æ³• | Integer addition
#eval (-3) + 4  -- ç»“æœ: 1

-- å®æ•°åŠ æ³• | Real number addition
#eval 3.14 + 2.86  -- ç»“æœ: 6.0

-- å‡½æ•°ä¸­çš„åŠ æ³• | Addition in functions
def add (x y : Nat) : Nat := x + y
#eval add 5 3  -- ç»“æœ: 8
```

### 2. å‡æ³•è¿ç®—ç¬¦ | Subtraction Operator

```lean
-- è‡ªç„¶æ•°å‡æ³• | Natural number subtraction
#eval 7 - 3  -- ç»“æœ: 4

-- æ•´æ•°å‡æ³• | Integer subtraction
#eval 3 - 7  -- ç»“æœ: -4

-- å®æ•°å‡æ³• | Real number subtraction
#eval 5.5 - 2.3  -- ç»“æœ: 3.2

-- å‡½æ•°ä¸­çš„å‡æ³• | Subtraction in functions
def subtract (x y : Nat) : Nat := x - y
#eval subtract 10 4  -- ç»“æœ: 6
```

### 3. ä¹˜æ³•è¿ç®—ç¬¦ | Multiplication Operator

```lean
-- è‡ªç„¶æ•°ä¹˜æ³• | Natural number multiplication
#eval 3 * 4  -- ç»“æœ: 12

-- æ•´æ•°ä¹˜æ³• | Integer multiplication
#eval (-3) * 4  -- ç»“æœ: -12

-- å®æ•°ä¹˜æ³• | Real number multiplication
#eval 2.5 * 4.0  -- ç»“æœ: 10.0

-- å‡½æ•°ä¸­çš„ä¹˜æ³• | Multiplication in functions
def multiply (x y : Nat) : Nat := x * y
#eval multiply 6 7  -- ç»“æœ: 42
```

### 4. é™¤æ³•è¿ç®—ç¬¦ | Division Operator

```lean
-- è‡ªç„¶æ•°é™¤æ³• | Natural number division
#eval 15 / 3  -- ç»“æœ: 5

-- æ•´æ•°é™¤æ³• | Integer division
#eval (-15) / 3  -- ç»“æœ: -5

-- å®æ•°é™¤æ³• | Real number division
#eval 15.0 / 3.0  -- ç»“æœ: 5.0

-- å‡½æ•°ä¸­çš„é™¤æ³• | Division in functions
def divide (x y : Nat) : Nat := x / y
#eval divide 20 4  -- ç»“æœ: 5
```

## é«˜çº§ç®—æœ¯è¿ç®—ç¬¦ | Advanced Arithmetic Operators

### 1. å–æ¨¡è¿ç®—ç¬¦ | Modulo Operator

```lean
-- è‡ªç„¶æ•°å–æ¨¡ | Natural number modulo
#eval 17 % 5  -- ç»“æœ: 2

-- æ•´æ•°å–æ¨¡ | Integer modulo
#eval (-17) % 5  -- ç»“æœ: 3

-- å‡½æ•°ä¸­çš„å–æ¨¡ | Modulo in functions
def modulo (x y : Nat) : Nat := x % y
#eval modulo 23 7  -- ç»“æœ: 2
```

### 2. å¹‚è¿ç®— | Exponentiation

```lean
-- è‡ªç„¶æ•°å¹‚è¿ç®— | Natural number exponentiation
#eval 2 ^ 3  -- ç»“æœ: 8

-- å®æ•°å¹‚è¿ç®— | Real number exponentiation
#eval 2.0 ^ 3.0  -- ç»“æœ: 8.0

-- å‡½æ•°ä¸­çš„å¹‚è¿ç®— | Exponentiation in functions
def power (x y : Nat) : Nat := x ^ y
#eval power 3 4  -- ç»“æœ: 81
```

### 3. ç»å¯¹å€¼ | Absolute Value

```lean
-- æ•´æ•°ç»å¯¹å€¼ | Integer absolute value
#eval abs (-5)  -- ç»“æœ: 5
#eval abs 5     -- ç»“æœ: 5

-- å®æ•°ç»å¯¹å€¼ | Real number absolute value
#eval abs (-3.14)  -- ç»“æœ: 3.14

-- å‡½æ•°ä¸­çš„ç»å¯¹å€¼ | Absolute value in functions
def absolute (x : Int) : Int := abs x
#eval absolute (-10)  -- ç»“æœ: 10
```

## æ¯”è¾ƒè¿ç®—ç¬¦ | Comparison Operators

### 1. ç›¸ç­‰æ€§æ¯”è¾ƒ | Equality Comparison

```lean
-- è‡ªç„¶æ•°ç›¸ç­‰æ€§ | Natural number equality
#eval 5 = 5  -- ç»“æœ: true
#eval 5 = 3  -- ç»“æœ: false

-- å®æ•°ç›¸ç­‰æ€§ | Real number equality
#eval 3.14 = 3.14  -- ç»“æœ: true

-- å‡½æ•°ä¸­çš„ç›¸ç­‰æ€§ | Equality in functions
def isEqual (x y : Nat) : Bool := x = y
#eval isEqual 7 7  -- ç»“æœ: true
```

### 2. å¤§å°æ¯”è¾ƒ | Size Comparison

```lean
-- å°äºæ¯”è¾ƒ | Less than comparison
#eval 3 < 5  -- ç»“æœ: true
#eval 5 < 3  -- ç»“æœ: false

-- å°äºç­‰äºæ¯”è¾ƒ | Less than or equal comparison
#eval 3 â‰¤ 5  -- ç»“æœ: true
#eval 5 â‰¤ 5  -- ç»“æœ: true

-- å¤§äºæ¯”è¾ƒ | Greater than comparison
#eval 5 > 3  -- ç»“æœ: true
#eval 3 > 5  -- ç»“æœ: false

-- å¤§äºç­‰äºæ¯”è¾ƒ | Greater than or equal comparison
#eval 5 â‰¥ 3  -- ç»“æœ: true
#eval 5 â‰¥ 5  -- ç»“æœ: true
```

## è¿ç®—ç¬¦ä¼˜å…ˆçº§ | Operator Precedence

### 1. ä¼˜å…ˆçº§è§„åˆ™ | Precedence Rules

```lean
-- è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰| Operator precedence (high to low)
-- 1. å‡½æ•°åº”ç”¨å’Œæ‹¬å·
-- 2. ^ (å¹‚è¿ç®—)
-- 3. *, /, % (ä¹˜æ³•ã€é™¤æ³•ã€å–æ¨¡)
-- 4. +, - (åŠ æ³•ã€å‡æ³•)
-- 5. =, <, â‰¤, >, â‰¥ (æ¯”è¾ƒè¿ç®—ç¬¦)

-- ç¤ºä¾‹ | Examples
#eval 2 + 3 * 4    -- ç»“æœ: 14 (ç­‰åŒäº 2 + (3 * 4))
#eval 2 * 3 ^ 4    -- ç»“æœ: 162 (ç­‰åŒäº 2 * (3 ^ 4))
#eval 2 ^ 3 * 4    -- ç»“æœ: 32 (ç­‰åŒäº (2 ^ 3) * 4)
```

### 2. æ‹¬å·ä½¿ç”¨ | Parentheses Usage

```lean
-- ä½¿ç”¨æ‹¬å·æ”¹å˜ä¼˜å…ˆçº§ | Use parentheses to change precedence
#eval (2 + 3) * 4  -- ç»“æœ: 20
#eval 2 + (3 * 4)  -- ç»“æœ: 14

-- å¤æ‚è¡¨è¾¾å¼ | Complex expressions
#eval ((2 + 3) * 4) ^ 2  -- ç»“æœ: 400
#eval 2 + 3 * 4 ^ 2      -- ç»“æœ: 50
```

## ç±»å‹ç›¸å…³è¿ç®—ç¬¦ | Type-Related Operators

### 1. ç±»å‹è½¬æ¢ | Type Conversion

```lean
-- è‡ªç„¶æ•°åˆ°æ•´æ•°è½¬æ¢ | Natural to integer conversion
#eval (5 : Nat) + (3 : Int)  -- éœ€è¦æ˜¾å¼è½¬æ¢

-- æ•´æ•°åˆ°å®æ•°è½¬æ¢ | Integer to real conversion
#eval (5 : Int) + (3.14 : Float)  -- éœ€è¦æ˜¾å¼è½¬æ¢

-- å‡½æ•°ä¸­çš„ç±»å‹è½¬æ¢ | Type conversion in functions
def convertAndAdd (x : Nat) (y : Int) : Int :=
  (x : Int) + y
#eval convertAndAdd 5 3  -- ç»“æœ: 8
```

### 2. ç±»å‹ç±»å®ä¾‹ | Type Class Instances

```lean
-- ä½¿ç”¨ç±»å‹ç±»è¿›è¡Œè¿ç®— | Use type classes for operations
class Add (Î± : Type) where
  add : Î± â†’ Î± â†’ Î±

instance : Add Nat where
  add := Nat.add

instance : Add Int where
  add := Int.add

-- æ³›å‹åŠ æ³•å‡½æ•° | Generic addition function
def genericAdd [Add Î±] (x y : Î±) : Î± := Add.add x y
```

## å®é™…åº”ç”¨ç¤ºä¾‹ | Practical Application Examples

### 1. æ•°å­¦å‡½æ•° | Mathematical Functions

```lean
-- å¹³æ–¹å‡½æ•° | Square function
def square (x : Nat) : Nat := x * x
#eval square 5  -- ç»“æœ: 25

-- é˜¶ä¹˜å‡½æ•° | Factorial function
def factorial (n : Nat) : Nat :=
  match n with
  | 0 => 1
  | n + 1 => (n + 1) * factorial n
#eval factorial 5  -- ç»“æœ: 120

-- æœ€å¤§å…¬çº¦æ•° | Greatest common divisor
def gcd (a b : Nat) : Nat :=
  if b = 0 then a else gcd b (a % b)
#eval gcd 48 18  -- ç»“æœ: 6
```

### 2. ç»Ÿè®¡å‡½æ•° | Statistical Functions

```lean
-- å¹³å‡å€¼ | Average
def average (xs : List Nat) : Float :=
  if xs.isEmpty then 0.0
  else (xs.sum : Float) / xs.length
#eval average [1, 2, 3, 4, 5]  -- ç»“æœ: 3.0

-- æ–¹å·® | Variance
def variance (xs : List Nat) : Float :=
  let avg := average xs
  let squaredDiffs := xs.map (fun x => (x : Float) - avg) |>.map (Â· ^ 2)
  average squaredDiffs
```

## æœ€ä½³å®è·µ | Best Practices

### 1. è¿ç®—ç¬¦ä½¿ç”¨ | Operator Usage

```lean
-- ä¼˜å…ˆä½¿ç”¨æ ‡å‡†è¿ç®—ç¬¦ | Prefer standard operators
def add (x y : Nat) : Nat := x + y  -- æ¨è
def add (x y : Nat) : Nat := Nat.add x y  -- é¿å…

-- ä½¿ç”¨æ‹¬å·æé«˜å¯è¯»æ€§ | Use parentheses for readability
def complex (a b c : Nat) : Nat :=
  (a + b) * (c - a)  -- æ¸…æ™°
def complex (a b c : Nat) : Nat :=
  a + b * c - a  -- æ¨¡ç³Š
```

### 2. ç±»å‹å®‰å…¨ | Type Safety

```lean
-- ç¡®ä¿ç±»å‹åŒ¹é… | Ensure type matching
def safeAdd (x y : Nat) : Nat := x + y  -- ç±»å‹å®‰å…¨

-- é¿å…ç±»å‹ä¸åŒ¹é… | Avoid type mismatches
-- def unsafeAdd (x : Nat) (y : Int) : Nat := x + y  -- é”™è¯¯
def safeAdd (x : Nat) (y : Int) : Int := (x : Int) + y  -- æ­£ç¡®
```

## ç›¸å…³é“¾æ¥ | Related Links

- [é€»è¾‘è¿ç®—ç¬¦](./02-é€»è¾‘è¿ç®—ç¬¦.md)
- [ä½è¿ç®—ç¬¦](./03-ä½è¿ç®—ç¬¦.md)
- [æ³¨é‡Šç³»ç»Ÿ](./04-æ³¨é‡Šç³»ç»Ÿ.md)
- [ç±»å‹ç³»ç»ŸåŸºç¡€](../../02-ç±»å‹ç³»ç»ŸåŸºç¡€.md)
- [æ ‡è¯†ç¬¦ä¸å…³é”®å­—](../01-æ ‡è¯†ç¬¦ä¸å…³é”®å­—/01-æ€»è§ˆ.md)
- [å­—é¢é‡ä¸å¸¸é‡](../03-å­—é¢é‡ä¸å¸¸é‡/01-æ€»è§ˆ.md)

## ç»ƒä¹  | Exercises

1. å®ç°åŸºæœ¬çš„æ•°å­¦å‡½æ•°ï¼ˆå¹³æ–¹ã€ç«‹æ–¹ã€é˜¶ä¹˜ï¼‰
2. åˆ›å»ºç»Ÿè®¡è®¡ç®—å‡½æ•°ï¼ˆå¹³å‡å€¼ã€æ–¹å·®ã€æ ‡å‡†å·®ï¼‰
3. è®¾è®¡ç±»å‹å®‰å…¨çš„ç®—æœ¯è¿ç®—åº“

---

*æœ€åæ›´æ–°ï¼š2025å¹´1æœˆ*
*ç‰ˆæœ¬ï¼š1.0*
