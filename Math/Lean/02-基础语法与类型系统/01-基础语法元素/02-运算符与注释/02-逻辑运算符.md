# 逻辑运算符 | Logical Operators

## 概述 | Overview

Lean中的逻辑运算符用于构建布尔表达式和逻辑推理。这些运算符是形式化证明和条件逻辑的基础。

Logical operators in Lean are used to construct boolean expressions and logical reasoning. These operators are fundamental to formal proofs and conditional logic.

## 基本逻辑运算符 | Basic Logical Operators

### 1. 逻辑与 | Logical AND

```lean
-- 逻辑与运算符 | Logical AND operator
#eval true && true   -- 结果: true
#eval true && false  -- 结果: false
#eval false && true  -- 结果: false
#eval false && false -- 结果: false

-- 函数中的逻辑与 | Logical AND in functions
def bothTrue (a b : Bool) : Bool := a && b
#eval bothTrue true false  -- 结果: false
```

### 2. 逻辑或 | Logical OR

```lean
-- 逻辑或运算符 | Logical OR operator
#eval true || true   -- 结果: true
#eval true || false  -- 结果: true
#eval false || true  -- 结果: true
#eval false || false -- 结果: false

-- 函数中的逻辑或 | Logical OR in functions
def eitherTrue (a b : Bool) : Bool := a || b
#eval eitherTrue false true  -- 结果: true
```

### 3. 逻辑非 | Logical NOT

```lean
-- 逻辑非运算符 | Logical NOT operator
#eval !true   -- 结果: false
#eval !false  -- 结果: true

-- 函数中的逻辑非 | Logical NOT in functions
def notTrue (a : Bool) : Bool := !a
#eval notTrue true   -- 结果: false
#eval notTrue false  -- 结果: true
```

## 条件逻辑 | Conditional Logic

### 1. 条件表达式 | Conditional Expressions

```lean
-- if-then-else表达式 | if-then-else expressions
def max (a b : Nat) : Nat :=
  if a > b then a else b

-- 嵌套条件 | Nested conditions
def sign (x : Int) : Int :=
  if x > 0 then 1
  else if x < 0 then -1
  else 0

-- 布尔条件 | Boolean conditions
def isEven (n : Nat) : Bool :=
  if n % 2 = 0 then true else false
```

### 2. 条件逻辑函数 | Conditional Logic Functions

```lean
-- 基于条件的函数 | Functions based on conditions
def absolute (x : Int) : Int :=
  if x ≥ 0 then x else -x

-- 复杂条件逻辑 | Complex conditional logic
def classify (x : Int) : String :=
  if x > 0 then "positive"
  else if x < 0 then "negative"
  else "zero"
```

## 逻辑等价性 | Logical Equivalence

### 1. 等价运算符 | Equivalence Operator

```lean
-- 逻辑等价 | Logical equivalence
def equivalent (a b : Bool) : Bool :=
  (a && b) || (!a && !b)

-- 使用等价运算符 | Using equivalence operator
#eval equivalent true true   -- 结果: true
#eval equivalent true false  -- 结果: false
#eval equivalent false false -- 结果: true
```

### 2. 德摩根定律 | De Morgan's Laws

```lean
-- 德摩根定律实现 | De Morgan's laws implementation
-- !(a && b) = !a || !b
def deMorgan1 (a b : Bool) : Bool :=
  !(a && b) = (!a || !b)

-- !(a || b) = !a && !b
def deMorgan2 (a b : Bool) : Bool :=
  !(a || b) = (!a && !b)

-- 验证德摩根定律 | Verify De Morgan's laws
#eval deMorgan1 true false  -- 结果: true
#eval deMorgan2 true false  -- 结果: true
```

## 逻辑推理 | Logical Reasoning

### 1. 蕴含关系 | Implication

```lean
-- 蕴含关系 | Implication relation
def implies (a b : Bool) : Bool :=
  !a || b

-- 蕴含关系示例 | Implication examples
#eval implies true true   -- 结果: true
#eval implies true false  -- 结果: false
#eval implies false true  -- 结果: true
#eval implies false false -- 结果: true
```

### 2. 逻辑推理规则 | Logical Reasoning Rules

```lean
-- 假言推理 | Modus ponens
-- 如果 P → Q 且 P，则 Q
def modusPonens (p q : Bool) : Bool :=
  if implies p q && p then q else false

-- 假言三段论 | Hypothetical syllogism
-- 如果 P → Q 且 Q → R，则 P → R
def hypotheticalSyllogism (p q r : Bool) : Bool :=
  if implies p q && implies q r then implies p r else false
```

## 量词逻辑 | Quantifier Logic

### 1. 全称量词 | Universal Quantifier

```lean
-- 全称量词 | Universal quantifier
def forAll (P : Nat → Bool) (n : Nat) : Bool :=
  match n with
  | 0 => P 0
  | n + 1 => P (n + 1) && forAll P n

-- 全称量词示例 | Universal quantifier example
def allPositive (xs : List Int) : Bool :=
  xs.all (· > 0)
```

### 2. 存在量词 | Existential Quantifier

```lean
-- 存在量词 | Existential quantifier
def exists (P : Nat → Bool) (n : Nat) : Bool :=
  match n with
  | 0 => P 0
  | n + 1 => P (n + 1) || exists P n

-- 存在量词示例 | Existential quantifier example
def anyPositive (xs : List Int) : Bool :=
  xs.any (· > 0)
```

## 逻辑证明 | Logical Proofs

### 1. 基本逻辑证明 | Basic Logical Proofs

```lean
-- 逻辑恒等式证明 | Logical identity proofs
theorem and_comm (a b : Bool) : a && b = b && a := by
  cases a <;> cases b <;> rfl

theorem or_comm (a b : Bool) : a || b = b || a := by
  cases a <;> cases b <;> rfl

-- 逻辑分配律证明 | Logical distributive law proofs
theorem and_or_distrib (a b c : Bool) : a && (b || c) = (a && b) || (a && c) := by
  cases a <;> cases b <;> cases c <;> rfl
```

### 2. 复杂逻辑证明 | Complex Logical Proofs

```lean
-- 德摩根定律证明 | De Morgan's law proofs
theorem deMorgan_and (a b : Bool) : !(a && b) = !a || !b := by
  cases a <;> cases b <;> rfl

theorem deMorgan_or (a b : Bool) : !(a || b) = !a && !b := by
  cases a <;> cases b <;> rfl

-- 蕴含关系证明 | Implication proofs
theorem implies_def (a b : Bool) : (a → b) = (!a || b) := by
  cases a <;> cases b <;> rfl
```

## 逻辑函数库 | Logical Function Library

### 1. 常用逻辑函数 | Common Logical Functions

```lean
-- 异或运算 | XOR operation
def xor (a b : Bool) : Bool :=
  (a || b) && !(a && b)

-- 同或运算 | XNOR operation
def xnor (a b : Bool) : Bool :=
  !xor a b

-- 多数表决 | Majority vote
def majority (a b c : Bool) : Bool :=
  (a && b) || (a && c) || (b && c)
```

### 2. 逻辑工具函数 | Logical Utility Functions

```lean
-- 逻辑等价检查 | Logical equivalence check
def isEquivalent (a b : Bool) : Bool :=
  a = b

-- 逻辑蕴含检查 | Logical implication check
def isImplied (a b : Bool) : Bool :=
  !a || b

-- 逻辑矛盾检查 | Logical contradiction check
def isContradiction (a b : Bool) : Bool :=
  a && !b
```

## 实际应用示例 | Practical Application Examples

### 1. 条件逻辑应用 | Conditional Logic Applications

```lean
-- 权限检查 | Permission check
def hasPermission (user : String) (action : String) : Bool :=
  if user = "admin" then true
  else if user = "user" && action = "read" then true
  else false

-- 状态机逻辑 | State machine logic
inductive State where
  | idle
  | running
  | paused
  | stopped

def canTransition (from to : State) : Bool :=
  match from, to with
  | .idle, .running => true
  | .running, .paused => true
  | .running, .stopped => true
  | .paused, .running => true
  | .paused, .stopped => true
  | .stopped, .idle => true
  | _, _ => false
```

### 2. 逻辑验证 | Logical Verification

```lean
-- 逻辑表达式验证 | Logical expression verification
def validateExpression (expr : String) : Bool :=
  -- 简化的表达式验证逻辑
  expr.length > 0 && expr.all (fun c => c.isAlpha || c.isDigit || c = ' ')

-- 逻辑规则验证 | Logical rule validation
def validateRule (premise conclusion : Bool) : Bool :=
  premise → conclusion
```

## 最佳实践 | Best Practices

### 1. 逻辑运算符使用 | Logical Operator Usage

```lean
-- 优先使用标准逻辑运算符 | Prefer standard logical operators
def clearLogic (a b : Bool) : Bool :=
  a && b  -- 推荐
-- def clearLogic (a b : Bool) : Bool :=
--   if a then b else false  -- 避免

-- 使用括号提高可读性 | Use parentheses for readability
def complexLogic (a b c : Bool) : Bool :=
  (a && b) || (!a && c)  -- 清晰
```

### 2. 逻辑证明策略 | Logical Proof Strategies

```lean
-- 使用cases策略处理布尔值 | Use cases tactic for booleans
theorem bool_identity (a : Bool) : a || !a = true := by
  cases a <;> rfl

-- 使用逻辑等价性 | Use logical equivalence
theorem logical_equivalence (a b : Bool) : a = b ↔ (a → b) && (b → a) := by
  cases a <;> cases b <;> simp
```

## 相关链接 | Related Links

- [01-算术运算符](./01-算术运算符.md)
- [03-位运算符](./03-位运算符.md)
- [04-注释系统](./04-注释系统.md)
- [证明系统与策略](../../03-证明系统与策略/README.md)

## 练习 | Exercises

1. 实现基本的逻辑运算函数
2. 证明德摩根定律和分配律
3. 设计状态机的逻辑转换规则

---

*最后更新：2025年1月*
*版本：1.0*
