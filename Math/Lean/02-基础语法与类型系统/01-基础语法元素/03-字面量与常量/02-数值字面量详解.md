# 数值字面量详解 | Numeric Literals Detailed

## 1. 自然数字面量 | Natural Number Literals

### 基本自然数字面量 | Basic Natural Number Literals

```lean
-- 十进制自然数
#check 0 : Nat
#check 1 : Nat
#check 42 : Nat
#check 100 : Nat
#check 999 : Nat

-- 大数字使用下划线分隔
#check 1_000 : Nat
#check 1_000_000 : Nat
#check 1_000_000_000 : Nat

-- 自然数的构造
#check Nat.zero : Nat
#check Nat.succ 0 : Nat
#check Nat.succ (Nat.succ 0) : Nat
```

### 二进制字面量 | Binary Literals

```lean
-- 二进制表示法
#check 0b0 : Nat      -- 0
#check 0b1 : Nat      -- 1
#check 0b10 : Nat     -- 2
#check 0b1010 : Nat   -- 10
#check 0b1111 : Nat   -- 15
#check 0b1000000 : Nat -- 64

-- 二进制运算示例
def binary_add (a b : Nat) : Nat := a + b
#check binary_add 0b1010 0b0101  -- 10 + 5 = 15
```

### 十六进制字面量 | Hexadecimal Literals

```lean
-- 十六进制表示法
#check 0x0 : Nat      -- 0
#check 0x1 : Nat      -- 1
#check 0xA : Nat      -- 10
#check 0xF : Nat      -- 15
#check 0x10 : Nat     -- 16
#check 0xFF : Nat     -- 255
#check 0xABCD : Nat   -- 43981

-- 十六进制运算示例
def hex_multiply (a b : Nat) : Nat := a * b
#check hex_multiply 0xA 0xB  -- 10 * 11 = 110
```

## 2. 整数字面量 | Integer Literals

### 基本整数字面量 | Basic Integer Literals

```lean
-- 正整数
#check 0 : Int
#check 1 : Int
#check 42 : Int
#check 100 : Int

-- 负整数
#check -1 : Int
#check -42 : Int
#check -100 : Int

-- 大整数
#check 1_000_000 : Int
#check -1_000_000 : Int
```

### 整数类型转换 | Integer Type Conversion

```lean
-- 自然数到整数
def nat_to_int (n : Nat) : Int := Int.ofNat n
#check nat_to_int 42 : Int

-- 整数到自然数（需要非负证明）
def int_to_nat (i : Int) (h : 0 ≤ i) : Nat := Int.toNat i

-- 整数运算
def int_add (a b : Int) : Int := a + b
def int_sub (a b : Int) : Int := a - b
def int_mul (a b : Int) : Int := a * b
```

## 3. 浮点数字面量 | Floating Point Literals

### 基本浮点数字面量 | Basic Floating Point Literals

```lean
-- 基本浮点数
#check 0.0 : Float
#check 1.0 : Float
#check 3.14 : Float
#check 2.718 : Float

-- 负浮点数
#check -1.5 : Float
#check -3.14 : Float

-- 整数部分为0的浮点数
#check 0.5 : Float
#check 0.25 : Float
#check 0.001 : Float
```

### 科学记数法 | Scientific Notation

```lean
-- 正指数
#check 1.5e2 : Float    -- 1.5 × 10² = 150.0
#check 2.5e3 : Float    -- 2.5 × 10³ = 2500.0
#check 1e6 : Float      -- 1 × 10⁶ = 1000000.0

-- 负指数
#check 1.5e-2 : Float   -- 1.5 × 10⁻² = 0.015
#check 2.5e-3 : Float   -- 2.5 × 10⁻³ = 0.0025
#check 1e-6 : Float     -- 1 × 10⁻⁶ = 0.000001

-- 大写E也可以使用
#check 1.5E2 : Float    -- 等同于 1.5e2
#check 2.5E-3 : Float   -- 等同于 2.5e-3
```

### 特殊浮点值 | Special Floating Point Values

```lean
-- 无穷大
#check Float.inf : Float
#check Float.negInf : Float

-- 非数字
#check Float.nan : Float

-- 检查特殊值
def is_finite (f : Float) : Bool := Float.isFinite f
def is_infinite (f : Float) : Bool := Float.isInfinite f
def is_nan (f : Float) : Bool := Float.isNaN f
```

## 4. 数值字面量的类型推导 | Type Inference for Numeric Literals

### 自动类型推导 | Automatic Type Inference

```lean
-- 自然数推导
def natural := 42        -- 推导为 Nat
def large_natural := 1_000_000  -- 推导为 Nat

-- 整数推导
def integer := -5        -- 推导为 Int
def large_integer := -1_000_000  -- 推导为 Int

-- 浮点数推导
def floating := 3.14     -- 推导为 Float
def scientific := 1.5e3  -- 推导为 Float
```

### 显式类型注解 | Explicit Type Annotations

```lean
-- 强制为特定类型
def nat_from_int : Nat := (42 : Nat)
def int_from_nat : Int := (42 : Int)
def float_from_int : Float := (42 : Float)

-- 类型转换函数
def convert_types : Float :=
  let n : Nat := 42
  let i : Int := -5
  let f : Float := 3.14
  f + (n : Float) + (i : Float)
```

## 5. 数值运算 | Numeric Operations

### 算术运算 | Arithmetic Operations

```lean
-- 自然数运算
def nat_ops (a b : Nat) : Nat := a + b * (a - b)
#check nat_ops 10 3  -- 10 + 3 * (10 - 3) = 31

-- 整数运算
def int_ops (a b : Int) : Int := a + b * (a - b)
#check int_ops 10 (-3)  -- 10 + (-3) * (10 - (-3)) = -29

-- 浮点数运算
def float_ops (a b : Float) : Float := a + b * (a - b)
#check float_ops 10.5 3.2  -- 10.5 + 3.2 * (10.5 - 3.2) = 33.86
```

### 比较运算 | Comparison Operations

```lean
-- 自然数比较
def nat_compare (a b : Nat) : Bool := a < b
#check nat_compare 5 10  -- true

-- 整数比较
def int_compare (a b : Int) : Bool := a ≤ b
#check int_compare (-5) 10  -- true

-- 浮点数比较
def float_compare (a b : Float) : Bool := a ≈ b  -- 近似相等
#check float_compare 3.14 3.14159  -- 可能为false，取决于精度
```

## 6. 数值常量定义 | Numeric Constant Definitions

### 数学常量 | Mathematical Constants

```lean
-- 基本数学常量
def PI : Float := 3.141592653589793
def E : Float := 2.718281828459045
def GOLDEN_RATIO : Float := 1.618033988749895

-- 物理常量
def SPEED_OF_LIGHT : Float := 299792458.0  -- m/s
def PLANCK_CONSTANT : Float := 6.62607015e-34  -- J⋅s
def AVOGADRO_NUMBER : Float := 6.02214076e23  -- mol⁻¹
```

### 系统常量 | System Constants

```lean
-- 系统限制
def MAX_NAT : Nat := 2^63 - 1
def MIN_INT : Int := -2^63
def MAX_INT : Int := 2^63 - 1

-- 精度常量
def FLOAT_EPSILON : Float := 1e-15
def FLOAT_MAX : Float := Float.maxFinite
def FLOAT_MIN : Float := Float.minFinite
```

## 7. 数值字面量最佳实践 | Best Practices for Numeric Literals

### 可读性 | Readability

```lean
-- 使用下划线分隔大数字
def population : Nat := 7_800_000_000
def file_size : Nat := 1_048_576  -- 1MB in bytes

-- 使用有意义的常量名
def MAX_RETRY_ATTEMPTS : Nat := 3
def DEFAULT_TIMEOUT_MS : Nat := 5000
def BUFFER_SIZE : Nat := 1024
```

### 类型安全 | Type Safety

```lean
-- 明确类型转换
def safe_division (a b : Nat) (h : b ≠ 0) : Float :=
  (a : Float) / (b : Float)

-- 边界检查
def bounded_add (a b : Nat) (max : Nat) : Nat :=
  let result := a + b
  if result ≤ max then result else max
```

### 性能考虑 | Performance Considerations

```lean
-- 使用适当的数值类型
def fast_counter : Nat := 0  -- 对于简单计数
def precise_calculation : Float := 3.14159  -- 对于需要精度的计算

-- 避免不必要的类型转换
def efficient_calc (n : Nat) : Nat :=
  n * 2 + 1  -- 保持在Nat类型中
```

---

*相关链接：*

- [字面量与常量总览](./01-总览.md)
- [字符串字面量详解](./03-字符串字面量详解.md)
- [类型系统基础](../02-类型系统基础.md)
