# 导航与搜索指南 | Navigation and Search Guide

## 一键命令区 | One-click Commands

```bash
# 初始化并构建
lake new demo && cd demo && lake build

# 更新依赖
lake update

# 运行可执行（若有）
lake exe demo:Main || true
```

## 🧭 知识库导航系统 | Knowledge Base Navigation System

### 主要导航方式 | Main Navigation Methods

#### 1. 目录结构导航 | Directory Structure Navigation

```text
Lean知识库/
├── 📋 README.md                    # 导航首页 - 从这里开始
├── 📊 01-总览.md                   # 知识库总览
├── 📁 02-基础语法与类型系统/        # 基础内容
│   ├── 01-基础语法元素.md
│   ├── 02-类型系统基础.md
│   ├── 03-表达式与声明.md
│   └── 04-模块与命名空间.md
├── 📁 03-证明系统与策略/           # 证明相关
│   ├── 01-交互式证明环境.md
│   ├── 02-基本证明策略.md
│   ├── 03-高级证明策略.md
│   └── 04-自动化证明技术.md
├── 📁 04-数学库与定理证明/         # 数学内容
│   ├── 01-数学库架构.md
│   ├── 02-基础数学概念.md
│   ├── 03-代数结构.md
│   └── 04-分析学与拓扑.md
├── 📁 05-高级主题与应用/           # 高级内容
│   ├── 01-依赖类型编程.md
│   ├── 02-形式化验证.md
│   ├── 03-函数式编程实践.md
│   └── 04-AI与Lean集成.md
└── 📁 06-实用工具与资源/           # 实用工具
    ├── 01-学习路径指南.md
    ├── 02-常见问题解答.md
    ├── 03-性能优化指南.md
    ├── 04-快速参考手册.md
    ├── 05-示例库.md
    ├── 06-项目模板与脚手架.md
    ├── 07-测试与验证指南.md
    ├── 08-部署与发布指南.md
    ├── 09-社区资源与贡献指南.md
    ├── 10-术语表与索引.md
    ├── 11-使用指南.md
    ├── 12-快速开始指南.md
    └── 13-导航与搜索指南.md (本文件)
```

#### 2. 主题导航 | Topic Navigation

**按主题快速访问**：

| 主题 | 主要文档 | 相关工具 |
|------|----------|----------|
| **基础语法** | [基础语法元素](../02-基础语法与类型系统/01-基础语法元素.md) | [快速参考手册](./04-快速参考手册.md) |
| **类型系统** | [类型系统基础](../02-基础语法与类型系统/02-类型系统基础.md) | [术语表与索引](./10-术语表与索引.md) |
| **证明策略** | [基本证明策略](../03-证明系统与策略/02-基本证明策略.md) | [快速参考手册](./04-快速参考手册.md) |
| **数学库** | [数学库架构](../04-数学库与定理证明/01-数学库架构.md) | [示例库](./05-示例库.md) |
| **高级应用** | [依赖类型编程](../05-高级主题与应用/01-依赖类型编程.md) | [项目模板与脚手架](./06-项目模板与脚手架.md) |

#### 3. 需求导航 | Need-based Navigation

**按需求快速查找**：

##### 我想学习Lean

- 开始：[快速开始指南](./12-快速开始指南.md)
- 路径：[学习路径指南](./01-学习路径指南.md)
- 基础：[基础语法元素](../02-基础语法与类型系统/01-基础语法元素.md)
- 问题：[常见问题解答](./02-常见问题解答.md)

##### 我想开发项目

- 模板：[项目模板与脚手架](./06-项目模板与脚手架.md)
- 测试：[测试与验证指南](./07-测试与验证指南.md)
- 部署：[部署与发布指南](./08-部署与发布指南.md)
- 优化：[性能优化指南](./03-性能优化指南.md)

##### 我想查找信息

- 语法：[快速参考手册](./04-快速参考手册.md)
- 术语：[术语表与索引](./10-术语表与索引.md)
- 示例：[示例库](./05-示例库.md)
- 使用：[使用指南](./11-使用指南.md)

##### 我想参与社区

- 指南：[社区资源与贡献指南](./09-社区资源与贡献指南.md)
- 参与：[使用指南](./11-使用指南.md)
- 资源：[社区资源与贡献指南](./09-社区资源与贡献指南.md)

## 🔍 搜索策略 | Search Strategies

### 1. 关键词搜索 | Keyword Search

#### 语法相关搜索

- **基础语法**：标识符、运算符、字面量、表达式
- **类型系统**：类型、依赖类型、类型类、类型推断
- **证明策略**：intro、apply、rewrite、induction、cases

#### 概念相关搜索

- **数学概念**：群、环、域、向量空间、拓扑
- **逻辑概念**：命题、定理、证明、量词、推理
- **编程概念**：函数、递归、模式匹配、高阶函数

#### 工具相关搜索

- **开发工具**：Lake、VS Code、Mathlib、构建系统
- **学习工具**：教程、游戏、练习、示例
- **社区工具**：Zulip、GitHub、论坛、会议

### 2. 分类搜索 | Category Search

#### 按文档类型搜索

- **教程类**：学习路径指南、使用指南、快速开始指南
- **参考类**：快速参考手册、术语表与索引、示例库
- **实践类**：项目模板与脚手架、测试与验证指南、部署与发布指南
- **社区类**：社区资源与贡献指南、常见问题解答

#### 按难度级别搜索

- **入门级**：基础语法元素、学习路径指南、快速开始指南
- **进阶级**：类型系统基础、基本证明策略、数学库架构
- **高级级**：依赖类型编程、高级证明策略、形式化验证

#### 按应用领域搜索

- **数学**：数学库架构、基础数学概念、代数结构、分析学与拓扑
- **编程**：基础语法元素、类型系统基础、函数式编程实践
- **证明**：交互式证明环境、基本证明策略、高级证明策略、自动化证明技术
- **应用**：形式化验证、AI与Lean集成、项目模板与脚手架

### 4. 📌 快速索引清单 | Quick Index Checklist

为高频定位需求提供一页式索引：

- **语法速查**：参见《[快速参考手册](./04-快速参考手册.md)》中的 tactics、patterns、attributes 小节
- **类型系统要点**：`Π/Σ` 类型、`structure`、`inductive`、`class/instance` → 《[类型系统基础](../02-基础语法与类型系统/02-类型系统基础.md)》
- **证明策略索引**：`intro`/`apply`/`rw`/`simp`/`cases`/`induction` → 《[基本证明策略](../03-证明系统与策略/02-基本证明策略.md)》
- **自动化与搜索**：`aesop`、`linarith`、`simp?`、`suggest` → 《[自动化证明技术](../03-证明系统与策略/04-自动化证明技术.md)》
- **数学库入口**：`algebra`、`topology`、`analysis`、`data`、`tactic` → 《[数学库架构](../04-数学库与定理证明/01-数学库架构.md)》
- **项目操作**：`lake new/build/test`、`lean --make` → 《[项目模板与脚手架](./06-项目模板与脚手架.md)》
- **术语与概念**：按字母索引 → 《[术语表与索引](./10-术语表与索引.md)》

提示：若你不确定查哪里，优先从《[快速参考手册](./04-快速参考手册.md)》或《[术语表与索引](./10-术语表与索引.md)》入手。

### 5. 📒 常见搜索场景 Playbook | Common Search Scenarios

- **找某个 tactic 的最小可用例子**：
  1) 在《示例库》按类别检索 → 2) VS Code 全局搜索 `by <tactic>`/`<tactic>?` → 3) 查看 mathlib 对应模块头部注释
- **定位某个定理的声明与用法**：
  1) 在 proof 里 `#find?`/`suggest` → 2) VS Code 搜索定理名 → 3) `rg -n "theorem\s+<Name>"` 在仓库根目录
- **从概念到实现路径（如群同态）**：
  《术语表与索引》→ 《数学库架构》对应 `algebra/group` → VS Code 定义跳转（F12）/类型悬浮 → 交叉阅读 `structure` 与实例化位置
- **排查 rewrite/simp 不生效**：
  开启 `set_option trace.simp true` 或使用 `simp?` 查看重写规则；确认目标方向与实例是否在作用域；查找 `[simp]` 标注位置
- **跨文件重构命名**：
  VS Code/rg 全库精确替换（先 dry-run），匹配 `theorem|def|structure|instance` 前缀，确保局部证明名不被误改
- **性能与时间瓶颈定位**：
  打开 `set_option profiler true`，结合 `#time` 标注区块；对热点调用做 `simp`/`aesop` 规则收敛

### 6. 🪟 Windows 下高效搜索组合 | Windows Search Combos

- **Everything + VS Code**：先用 Everything 锁定目录/文件名，再用 VS Code `Ctrl+Shift+F` 精确检索内容
- **ripgrep (rg)**：在 PowerShell 中于仓库根执行：
  - 语法/战术：`rg -n "\\b(intro|apply|rewrite|simp|cases|induction)\\b"`  | 仅 Lean：`--glob "**/*.lean"`
  - 定理声明：`rg -n "^(theorem|lemma)\\s+<Name>" --glob "**/*.lean"`
  - 结构/类型：`rg -n "^(structure|inductive)\\s+" --glob "**/*.lean"`
- **VS Code 技巧**：
  - 正则模式开启后可用 `^theorem\s+`、`\b@[a-z]+\b` 匹配注解
  - 使用“仅打开的编辑器/排除文件”缩小范围；保存搜索为工作区
- **Lean 原生命令**：
  - `#find?`、`suggest`：按目标类型或上下文查可用定理
  - `#print`：查看常量/定理完整签名
  - `#check`：快速验证表达式类型

### 7. ⌨️ 一键可复制命令区 | Copy-ready Commands

```powershell
# 在仓库根目录执行（PowerShell）
# 仅搜索 Lean 文件
rg -n "^(theorem|lemma)\s+" --glob "**/*.lean"

# 检索常用 tactic 使用位置
rg -n "\b(intro|apply|rewrite|simp|cases|induction)\b" --glob "**/*.lean"

# 查找结构与类型声明
rg -n "^(structure|inductive)\s+" --glob "**/*.lean"

# 指定模块目录（示例：algebra）
rg -n "^theorem\s+" .\Mathlib\algebra --glob "**/*.lean"
```

前提与环境建议：

- Windows 建议安装：Everything、ripgrep、Git、VS Code（含 Lean 拓展）；将 rg 加入 PATH
- VS Code：启用正则搜索，工作区排除大型目录（如 `Refactor/` 文档区）
- Lean 工具链：确保 `lake` 可用，`elan`/`lean` 已安装；在含有 `lakefile.lean` 的 Lean 项目根执行命令

更多可复制命令：

```powershell
# 查找 structure/inductive/class/instance 声明
rg -n "^(structure|inductive|class|instance)\s+" --glob "**/*.lean"

# 排查 simp 规则来源（需在 Lean 交互中）
# 在证明脚本顶部添加：
# set_option trace.simp true

# Windows 查找文件名（Everything CLI 示意）
es.exe -name *.lean | findstr /i algebra
```

```regex
# VS Code 全局搜索（启用正则）示例
^theorem\s+            # 匹配定理声明
\b@[a-z]+\b           # 匹配注解，如 @simp, @instance
\bintro|apply|simp\b   # 匹配常用战术
```

### 8. ❗ 常见失败原因速查表 | Quick Table of Common Failures

- **定理名错误/拼写差异**：使用 `#find?`/`suggest` 按类型反向查找；在 VS Code/rg 用同义词搜索
- **作用域/导入缺失**：确认 `import` 路径；使用 `open`/`namespace`；检查是否在 `Mathlib` 命名空间下
- **方向不符（rw/simp）**：尝试 `rw [← h]` 或 `simp [h]`；必要时先构造 `Eq.symm h`
- **实例缺失（typeclass）**：查看报错中的 `[Instance]` 提示；`instance` 搜索或显式传入实例参数
- **simp 集不闭合/规则缺**：打开 `set_option trace.simp true`，检查使用了哪些规则；为自有定理加 `@[simp]`
- **目标类型不匹配**：用 `#check` 检查子目标类型；使用中间 `have`/`calc` 拆分
- **搜索范围过大**：用 Everything/VS Code 排除无关目录，或在模块下定域搜索

### 3. 交叉引用搜索 | Cross-reference Search

#### 使用相关链接

每个文档都包含"相关链接"部分，可以快速跳转到相关内容：

**示例**：

- 从[基础语法元素](../02-基础语法与类型系统/01-基础语法元素.md)可以跳转到：
  - [类型系统基础](../02-基础语法与类型系统/02-类型系统基础.md)
  - [快速参考手册](./04-快速参考手册.md)
  - [术语表与索引](./10-术语表与索引.md)

#### 使用内部链接

文档内部包含大量内部链接，可以快速跳转到相关章节：

**示例**：

- 在[使用指南](./11-使用指南.md)中可以跳转到：
  - 学习策略
  - 开发实践
  - 社区参与
  - 问题解决

## 🎯 高效导航技巧 | Efficient Navigation Tips

### 1. 使用书签 | Using Bookmarks

#### 重要文档书签

建议为以下重要文档创建书签：

- [README.md](../README.md) - 导航首页
- [01-总览.md](../01-总览.md) - 知识库总览
- [快速开始指南](./12-快速开始指南.md) - 快速上手
- [快速参考手册](./04-快速参考手册.md) - 语法速查
- [术语表与索引](./10-术语表与索引.md) - 术语查找

#### 个人学习书签

根据你的学习进度，为相关文档创建书签：

- 当前学习的文档
- 需要复习的文档
- 感兴趣的文档
- 有用的工具文档

### 2. 使用搜索功能 | Using Search Function

#### 浏览器搜索

- **Ctrl+F** (Windows) 或 **Cmd+F** (Mac)：在当前页面搜索
- **Ctrl+Shift+F** (Windows) 或 **Cmd+Shift+F** (Mac)：全局搜索

#### 搜索技巧

- 使用精确的关键词
- 尝试不同的同义词
- 使用引号进行精确匹配
- 使用通配符进行模糊匹配

### 3. 使用目录导航 | Using Table of Contents

#### 文档目录

每个文档都有详细的目录，可以快速跳转到相关章节：

- 使用目录快速定位内容
- 利用标题层级理解文档结构
- 通过目录了解文档覆盖范围

#### 知识库总目录

[01-总览.md](../01-总览.md)提供了完整的知识库目录：

- 按主题组织的文档列表
- 每个文档的简要描述
- 相关链接和交叉引用

## 📱 移动端导航 | Mobile Navigation

### 1. 移动端优化 | Mobile Optimization

#### 响应式设计

所有文档都采用响应式设计，在移动设备上也能良好显示：

- 自适应布局
- 可读的字体大小
- 触摸友好的链接

#### 移动端导航技巧

- 使用目录快速跳转
- 利用搜索功能
- 使用书签功能
- 利用返回按钮

### 2. 移动端搜索 | Mobile Search

#### 移动端搜索策略

- 使用简化的关键词
- 利用语音搜索
- 使用移动端专用搜索工具
- 利用浏览器搜索功能

## 🔧 高级导航技巧 | Advanced Navigation Tips

### 1. 使用快捷键 | Using Keyboard Shortcuts

#### 浏览器快捷键

- **Ctrl+L** (Windows) 或 **Cmd+L** (Mac)：跳转到地址栏
- **Ctrl+T** (Windows) 或 **Cmd+T** (Mac)：打开新标签页
- **Ctrl+W** (Windows) 或 **Cmd+W** (Mac)：关闭当前标签页
- **Ctrl+Tab** (Windows) 或 **Cmd+Tab** (Mac)：切换标签页

#### 编辑器快捷键

- **Ctrl+F** (Windows) 或 **Cmd+F** (Mac)：搜索
- **Ctrl+G** (Windows) 或 **Cmd+G** (Mac)：跳转到行
- **Ctrl+Shift+P** (Windows) 或 **Cmd+Shift+P** (Mac)：命令面板

### 2. 使用浏览器扩展 | Using Browser Extensions

#### 推荐扩展

- **Markdown Viewer**：更好的Markdown显示
- **Table of Contents**：自动生成目录
- **Search**：增强搜索功能
- **Bookmark Manager**：管理书签

### 3. 使用外部工具 | Using External Tools

#### 文档管理工具

- **Notion**：整理学习笔记
- **Obsidian**：知识图谱管理
- **Roam Research**：关联笔记
- **Logseq**：块状笔记

#### 搜索工具

- **Alfred** (Mac)：快速搜索
- **Everything** (Windows)：文件搜索
- **Spotlight** (Mac)：系统搜索
- **Windows Search** (Windows)：系统搜索

## 🎨 个性化导航 | Personalized Navigation

### 1. 创建个人导航 | Creating Personal Navigation

#### 个人学习地图

创建你自己的学习地图：

- 标记已完成的文档
- 标记感兴趣的文档
- 标记需要复习的文档
- 标记有用的工具

#### 个人书签系统

建立你自己的书签系统：

- 按主题分类书签
- 按优先级排序书签
- 定期整理书签
- 分享有用的书签

### 2. 使用标签系统 | Using Tag System

#### 文档标签

为文档添加标签：

- **难度标签**：入门、进阶、高级
- **类型标签**：教程、参考、实践、社区
- **主题标签**：语法、类型、证明、数学、编程
- **状态标签**：已读、在读、待读、收藏

#### 标签管理

- 使用一致的标签命名
- 定期整理标签
- 使用标签进行筛选
- 分享标签系统

## 🚀 导航最佳实践 | Navigation Best Practices

### 1. 高效导航原则 | Efficient Navigation Principles

#### 明确目标

- 在导航前明确你要找什么
- 使用合适的关键词
- 选择合适的导航方式
- 记录有用的路径

#### 保持专注

- 避免过度浏览
- 专注于当前任务
- 使用书签避免重复搜索
- 定期整理导航习惯

### 2. 导航效率提升 | Navigation Efficiency Improvement

#### 建立习惯

- 每天使用相同的导航路径
- 建立固定的学习时间
- 使用固定的工具和资源
- 定期回顾和调整

#### 持续改进

- 记录导航中的问题
- 寻找更高效的导航方式
- 学习新的导航技巧
- 分享导航经验

---

**记住**：有效的导航是高效学习的关键。花时间熟悉这个知识库的导航系统，建立你自己的导航习惯，这将大大提高你的学习效率。

**开始探索吧！** 🧭

---

*相关链接：*

- [快速开始指南](./12-快速开始指南.md)
- [使用指南](./11-使用指南.md)
- [学习路径指南](./01-学习路径指南.md)
- [快速参考手册](./04-快速参考手册.md)
- [术语表与索引](./10-术语表与索引.md)

---

附：`simp/rewrite` 排错最小可运行示例（片段）

```lean
-- 示例1：方向不匹配导致 rw 失败
example (x y : Nat) (h : x = y) : y = x := by
  -- rw [h] 会尝试把 x 替换成 y，但目标是 y = x，方向不符
  -- 解决：使用对称等式或指定方向
  have : y = x := by
    exact Eq.symm h
  exact this

-- 示例2：[simp] 标注缺失导致 simp 不生效
@[simp] theorem add_zero' (n : Nat) : n + 0 = n := by
  simpa using Nat.add_zero n

example (n : Nat) : n + 0 = n := by
  -- 若没有上面的 @[simp] 标注，simp 可能不收敛
  simp

-- 示例3：查看 simp 使用的规则
set_option trace.simp true
example (a b : Nat) (h : a = b) : a + 0 = b := by
  -- 观察到使用了 add_zero' 与 h 的重写
  simp [h]
```
