# 02-函子与自然变换

## 1. 函子的概念

函子是范畴论中连接不同范畴的基本工具，它保持范畴的结构，将一个范畴中的对象和态射映射到另一个范畴中。

### 1.1 函子的定义

设 $\mathcal{C}$ 和 $\mathcal{D}$ 是两个范畴，一个从 $\mathcal{C}$ 到 $\mathcal{D}$ 的**函子** $F: \mathcal{C} \to \mathcal{D}$ 由以下两部分组成：

1. **对象映射**：将 $\mathcal{C}$ 中的每个对象 $A$ 映射为 $\mathcal{D}$ 中的对象 $F(A)$。
2. **态射映射**：将 $\mathcal{C}$ 中的每个态射 $f: A \to B$ 映射为 $\mathcal{D}$ 中的态射 $F(f): F(A) \to F(B)$。

这些映射需要满足以下两个条件：

1. **保持恒等态射**：对于 $\mathcal{C}$ 中的任意对象 $A$，$F(\text{id}_A) = \text{id}_{F(A)}$。
2. **保持合成**：对于 $\mathcal{C}$ 中的任意可合成态射 $f: A \to B$ 和 $g: B \to C$，$F(g \circ f) = F(g) \circ F(f)$。

### 1.2 函子的记号

函子通常用大写字母表示，如 $F$, $G$, $H$ 等。对于对象 $A$ 和态射 $f$，函子的作用记为 $F(A)$ 和 $F(f)$。

## 2. 函子的类型

### 2.1 共变函子与反变函子

函子可以分为两种基本类型：

1. **共变函子**：保持态射的方向，即 $F: \mathcal{C} \to \mathcal{D}$ 将态射 $f: A \to B$ 映射为 $F(f): F(A) \to F(B)$。

2. **反变函子**：反转态射的方向，即 $F: \mathcal{C}^{\text{op}} \to \mathcal{D}$ 将态射 $f: A \to B$ 映射为 $F(f): F(B) \to F(A)$。这里 $\mathcal{C}^{\text{op}}$ 是 $\mathcal{C}$ 的对偶范畴，其中所有态射的方向都被反转。

反变函子也可以看作是从 $\mathcal{C}$ 到 $\mathcal{D}^{\text{op}}$ 的共变函子。

### 2.2 忠实函子、满函子与全函子

根据态射映射的性质，函子可以进一步分类：

1. **忠实函子**：如果对于任意两个对象 $A, B \in \mathcal{C}$，映射 $F: \text{Hom}_{\mathcal{C}}(A, B) \to \text{Hom}_{\mathcal{D}}(F(A), F(B))$ 是单射（注入），则称 $F$ 为忠实函子。

2. **满函子**：如果对于任意两个对象 $A, B \in \mathcal{C}$，映射 $F: \text{Hom}_{\mathcal{C}}(A, B) \to \text{Hom}_{\mathcal{D}}(F(A), F(B))$ 是满射（满），则称 $F$ 为满函子。

3. **全函子**：如果 $F$ 既是忠实函子又是满函子，则称 $F$ 为全函子。

### 2.3 本函子与常函子

1. **本函子**：范畴 $\mathcal{C}$ 上的恒等函子，记为 $\text{Id}_{\mathcal{C}}: \mathcal{C} \to \mathcal{C}$，它将每个对象和态射映射到自身。

2. **常函子**：将 $\mathcal{C}$ 中的所有对象都映射到 $\mathcal{D}$ 中的同一个对象 $D$，将所有态射都映射到 $D$ 上的恒等态射 $\text{id}_D$ 的函子。

## 3. 函子的例子

### 3.1 忘却函子

**忘却函子**从一个具有额外结构的范畴到一个结构较少的范畴，"忘记"了部分结构。例如：

- $U: \text{Grp} \to \text{Set}$ 将群映射为其底层集合，将群同态映射为其底层函数。
- $U: \text{Ring} \to \text{Grp}$ 将环映射为其加法群，将环同态映射为群同态。

### 3.2 幂集函子

**幂集函子** $\mathcal{P}: \text{Set} \to \text{Set}$ 定义为：

- 对于集合 $X$，$\mathcal{P}(X)$ 是 $X$ 的所有子集构成的集合。
- 对于函数 $f: X \to Y$，$\mathcal{P}(f): \mathcal{P}(X) \to \mathcal{P}(Y)$ 将 $X$ 的子集 $A$ 映射为 $f(A) = \{f(a) \mid a \in A\}$。

### 3.3 Hom 函子

对于范畴 $\mathcal{C}$ 中的固定对象 $A$，**Hom 函子** $\text{Hom}_{\mathcal{C}}(A, -): \mathcal{C} \to \text{Set}$ 定义为：

- 对于对象 $X$，$\text{Hom}_{\mathcal{C}}(A, X)$ 是从 $A$ 到 $X$ 的所有态射构成的集合。
- 对于态射 $f: X \to Y$，$\text{Hom}_{\mathcal{C}}(A, f): \text{Hom}_{\mathcal{C}}(A, X) \to \text{Hom}_{\mathcal{C}}(A, Y)$ 将态射 $g: A \to X$ 映射为复合态射 $f \circ g: A \to Y$。

类似地，可以定义反变 Hom 函子 $\text{Hom}_{\mathcal{C}}(-, A): \mathcal{C}^{\text{op}} \to \text{Set}$。

## 4. 自然变换

### 4.1 自然变换的定义

自然变换是函子之间的"映射"，它捕捉了不同函子之间的结构关系。

设 $F, G: \mathcal{C} \to \mathcal{D}$ 是两个函子，一个从 $F$ 到 $G$ 的**自然变换** $\eta: F \Rightarrow G$ 是一族态射 $\{\eta_A: F(A) \to G(A) \mid A \in \text{Ob}(\mathcal{C})\}$，其中 $\eta_A$ 称为 $\eta$ 在对象 $A$ 处的**分量**，满足以下条件：

对于 $\mathcal{C}$ 中的任意态射 $f: A \to B$，下图可交换：

```
F(A) ---F(f)---> F(B)
  |                |
 η_A              η_B
  |                |
  v                v
G(A) ---G(f)---> G(B)
```

即 $\eta_B \circ F(f) = G(f) \circ \eta_A$。这个条件称为**自然性条件**。

### 4.2 自然变换的合成

自然变换可以通过两种方式合成：

1. **垂直合成**：如果 $\eta: F \Rightarrow G$ 和 $\mu: G \Rightarrow H$ 是自然变换，其中 $F, G, H: \mathcal{C} \to \mathcal{D}$，则它们的垂直合成 $\mu \circ \eta: F \Rightarrow H$ 在对象 $A$ 处的分量为 $(\mu \circ \eta)_A = \mu_A \circ \eta_A$。

2. **水平合成**：如果 $\eta: F \Rightarrow G$ 和 $\mu: H \Rightarrow K$ 是自然变换，其中 $F, G: \mathcal{C} \to \mathcal{D}$ 和 $H, K: \mathcal{D} \to \mathcal{E}$，则它们的水平合成 $\mu * \eta: H \circ F \Rightarrow K \circ G$ 在对象 $A$ 处的分量为 $(\mu * \eta)_A = \mu_{G(A)} \circ H(\eta_A) = K(\eta_A) \circ \mu_{F(A)}$。

### 4.3 自然同构

如果自然变换 $\eta: F \Rightarrow G$ 的每个分量 $\eta_A$ 都是同构，则称 $\eta$ 为**自然同构**，记为 $F \cong G$。

## 5. 自然变换的例子

### 5.1 单位与余单位

设 $F: \mathcal{C} \to \mathcal{D}$ 和 $G: \mathcal{D} \to \mathcal{C}$ 是函子，如果存在自然变换 $\eta: \text{Id}_{\mathcal{C}} \Rightarrow G \circ F$，则称 $\eta$ 为 $F$ 和 $G$ 的**单位**；如果存在自然变换 $\varepsilon: F \circ G \Rightarrow \text{Id}_{\mathcal{D}}$，则称 $\varepsilon$ 为 $F$ 和 $G$ 的**余单位**。

### 5.2 双对偶空间的标准嵌入

在向量空间范畴 $\text{Vect}_k$ 中，考虑双对偶函子 $(-^{**}): \text{Vect}_k \to \text{Vect}_k$，它将向量空间 $V$ 映射为其双对偶空间 $V^{**}$。存在一个自然变换 $\eta: \text{Id}_{\text{Vect}_k} \Rightarrow (-^{**})$，其中 $\eta_V: V \to V^{**}$ 是标准嵌入，定义为 $\eta_V(v)(f) = f(v)$，对于所有 $v \in V$ 和 $f \in V^*$。

### 5.3 集合与幂集之间的关系

考虑幂集函子 $\mathcal{P}: \text{Set} \to \text{Set}$ 和单元素集合函子 $\{-\}: \text{Set} \to \text{Set}$，其中 $\{-\}(X) = \{\{x\} \mid x \in X\}$。存在一个自然变换 $\eta: \{-\} \Rightarrow \mathcal{P}$，其中 $\eta_X: \{-\}(X) \to \mathcal{P}(X)$ 是包含映射。

## 6. Yoneda 引理

### 6.1 表示函子

对于范畴 $\mathcal{C}$ 中的对象 $A$，**协变表示函子** $h^A = \text{Hom}_{\mathcal{C}}(A, -): \mathcal{C} \to \text{Set}$ 和**反变表示函子** $h_A = \text{Hom}_{\mathcal{C}}(-, A): \mathcal{C}^{\text{op}} \to \text{Set}$ 是范畴论中的基本函子。

### 6.2 Yoneda 嵌入

**Yoneda 嵌入**是一个函子 $Y: \mathcal{C} \to [\mathcal{C}^{\text{op}}, \text{Set}]$，它将对象 $A$ 映射为反变表示函子 $h_A$，将态射 $f: A \to B$ 映射为自然变换 $h_f: h_A \Rightarrow h_B$，其中 $h_f$ 在对象 $X$ 处的分量 $(h_f)_X: \text{Hom}_{\mathcal{C}}(X, A) \to \text{Hom}_{\mathcal{C}}(X, B)$ 将态射 $g: X \to A$ 映射为复合态射 $f \circ g: X \to B$。

### 6.3 Yoneda 引理的陈述

**Yoneda 引理**是范畴论中的基本结果，它陈述了：

对于任意范畴 $\mathcal{C}$，任意对象 $A \in \mathcal{C}$ 和任意函子 $F: \mathcal{C}^{\text{op}} \to \text{Set}$，存在一个自然的双射：

$$\text{Nat}(h_A, F) \cong F(A)$$

其中 $\text{Nat}(h_A, F)$ 表示从 $h_A$ 到 $F$ 的所有自然变换构成的集合。

这个双射将自然变换 $\eta: h_A \Rightarrow F$ 映射为元素 $\eta_A(\text{id}_A) \in F(A)$。

### 6.4 Yoneda 引理的意义

Yoneda 引理有深远的意义：

1. 它表明对象 $A$ 可以通过其与其他对象的关系（即 $h_A$）完全确定。
2. 它建立了范畴 $\mathcal{C}$ 与函子范畴 $[\mathcal{C}^{\text{op}}, \text{Set}]$ 之间的联系。
3. 它是许多范畴论结果的基础，如表示定理和伴随函子定理。

## 7. 函子范畴

### 7.1 函子范畴的定义

给定两个范畴 $\mathcal{C}$ 和 $\mathcal{D}$，**函子范畴** $[\mathcal{C}, \mathcal{D}]$ 定义为：

- **对象**：从 $\mathcal{C}$ 到 $\mathcal{D}$ 的所有函子
- **态射**：函子之间的自然变换
- **合成**：自然变换的垂直合成
- **恒等态射**：恒等自然变换

### 7.2 函子范畴的性质

函子范畴具有许多重要性质：

1. 如果 $\mathcal{D}$ 是完备的（有所有小极限），则 $[\mathcal{C}, \mathcal{D}]$ 也是完备的。
2. 如果 $\mathcal{D}$ 是余完备的（有所有小余极限），则 $[\mathcal{C}, \mathcal{D}]$ 也是余完备的。
3. 函子范畴中的极限和余极限是逐点计算的。

## 8. 函子与自然变换的应用

### 8.1 代数拓扑中的应用

函子和自然变换在代数拓扑中有广泛应用：

1. **同调函子**：将拓扑空间映射为其同调群的函子。
2. **上同调函子**：将拓扑空间映射为其上同调群的函子。
3. **基本群函子**：将拓扑空间映射为其基本群的函子。

### 8.2 代数几何中的应用

在代数几何中，函子用于连接不同的几何和代数结构：

1. **全局截面函子**：将层映射为其全局截面的函子。
2. **结构层函子**：将代数簇映射为其结构层的函子。

### 8.3 计算机科学中的应用

函子和自然变换在计算机科学中也有重要应用：

1. **数据类型**：代数数据类型可以看作是函子。
2. **函数式编程**：单子（monad）是函子与自然变换的特殊组合。
3. **范畴语义学**：使用函子将编程语言结构映射到数学结构。

## 9. 练习与应用

### 9.1 验证函子

**练习**：验证忘却函子 $U: \text{Grp} \to \text{Set}$ 满足函子的公理。

### 9.2 构造自然变换

**练习**：构造从恒等函子 $\text{Id}_{\text{Set}}$ 到幂集函子 $\mathcal{P}$ 的自然变换。

### 9.3 应用 Yoneda 引理

**练习**：使用 Yoneda 引理证明：如果两个对象 $A$ 和 $B$ 的表示函子 $h_A$ 和 $h_B$ 同构，则 $A$ 和 $B$ 同构。

## 10. 参考文献

1. Mac Lane, S. (1998). *Categories for the Working Mathematician* (2nd ed.). Springer.
2. Awodey, S. (2010). *Category Theory* (2nd ed.). Oxford University Press.
3. Leinster, T. (2014). *Basic Category Theory*. Cambridge University Press.
4. Riehl, E. (2017). *Category Theory in Context*. Dover Publications.

---

**创建日期**: 2025-07-03
**最后更新**: 2025-07-03
