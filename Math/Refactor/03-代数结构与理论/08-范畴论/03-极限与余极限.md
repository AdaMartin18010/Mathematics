# 03-极限与余极限

## 1. 核心思想：作为泛构造的极限

极限 (Limit) 和余极限 (Colimit) 是范畴论中用于统一描述"从一组对象和态射构造新对象"这一过程的强大工具。它们的核心思想是**泛性质 (Universal Property)**：我们不是通过描述一个对象的"内部构造"来定义它，而是通过它如何**唯一地**与系统中所有其他类似构造相关联来定义它。

这个过程通常分为两步：

1. 定义一个描述所需模式的**图表 (Diagram)**（一个从索引范畴 $\mathcal{J}$ 到目标范畴 $\mathcal{C}$ 的函子 $F$）。
2. 寻找这个图表的**泛锥 (Universal Cone)**，这个泛锥的顶点就是我们所求的**极限**。

余极限则是这个过程的对偶，它寻找的是**泛余锥 (Universal Cocone)**。

## 2. 锥与极限的定义

### 2.1 锥 (Cone)

**定义**：给定一个图表 $F: \mathcal{J} \to \mathcal{C}$，一个**锥**由一个对象 $N$（称为锥的**顶点 (apex)**）和一族态射 $\psi_j: N \to F(j)$（对 $\mathcal{J}$ 中的每个对象 $j$）组成。这族态射必须与图表中的态射兼容，即对于 $\mathcal{J}$ 中的任意态射 $f: j \to k$，下图必须交换：$F(f) \circ \psi_j = \psi_k$。

直观上，一个锥就是将一个顶点对象"一致地"映射到整个图表的所有对象上。

### 2.2 极限 (Limit)

**定义**：图表 $F$ 的**极限**是一个"最好"的锥，我们称之为**泛锥** $(L, \phi)$。它的"最好"体现在：对于**任何**其他锥 $(N, \psi)$，都存在一个**唯一的**态射 $u: N \to L$，使得这个 $u$ 与两个锥的映射完全兼容（即 $\phi_j \circ u = \psi_j$ 对所有 $j$ 成立）。

这个唯一的态射 $u$ 确保了 $L$ 是所有可能顶点中最"紧密"或最"普适"的那一个。我们记 $L = \lim F$。

## 3. 余锥与余极限的定义

**对偶地**，我们可以定义**余锥 (Cocone)** 和**余极限 (Colimit)**。

### 3.1 余锥 (Cocone)

**定义**：给定图表 $F: \mathcal{J} \to \mathcal{C}$，一个**余锥**由一个顶点对象 $N$ 和一族从图表射向它的态射 $\psi_j: F(j) \to N$ 组成，并满足对偶于锥的交换条件：$\psi_k \circ F(f) = \psi_j$。

### 3.2 余极限 (Colimit)

**定义**：图表 $F$ 的**余极限**是一个**泛余锥** $(C, \phi)$。对于任何其他余锥 $(N, \psi)$，都存在一个唯一的态射 $u: C \to N$，使得 $u \circ \phi_j = \psi_j$ 对所有 $j$ 成立。我们记 $C = \text{colim} F$。

**唯一性**：如果极限或余极限存在，它在同构的意义下是唯一的。

## 4. 极限的重要特例

通过改变索引范畴 $\mathcal{J}$ 的形状，我们可以得到许多熟悉的数学构造。

### 4.1 终对象 (Terminal Object)

- **图表**：索引范畴 $\mathcal{J}$ 是**空范畴** 𝟘 (没有对象，没有态射)。
- **极限**：该图表的极限是一个**终对象** $T$。锥仅仅是 $\mathcal{C}$ 中的一个对象，泛性质要求对于任何其他对象 $N$，都存在唯一的态射 $N \to T$。

### 4.2 乘积 (Product)

- **图表**：索引范畴 $\mathcal{J}$ 是一个**离散范畴**（只有对象和恒等态射），例如只有两个对象的范畴 𝟚。函子 $F: 𝟚 \to \mathcal{C}$ 只是简单地挑出 $\mathcal{C}$ 中的两个对象 $A, B$。
- **极限 (乘积)**：该图表的极限就是 $A$ 和 $B$ 的**乘积** $A \times B$。
  - **泛性质**：乘积 $A \times B$ 带有一对**投影 (projections)**态射 $p_A: A \times B \to A$ 和 $p_B: A \times B \to B$。对于任何其他对象 $Z$ 和一对态射 $f: Z \to A$, $g: Z \to B$，存在一个**唯一的**态射 $u: Z \to A \times B$，使得 $p_A \circ u = f$ 且 $p_B \circ u = g$。

```text
        Z
        /|\
    / | \
    f  |g \
    /  u|   \
    /    |    \
V     |     V

A <--- A×B ---> B
    p_A     p_B

```

- **具体范畴中的例子**：
  - **Set**: 笛卡尔积。$A \times B = \{(a, b) \mid a \in A, b \in B\}$。
  - **Grp**: 直积群。
  - **编程**: 积类型，如元组 `(A, B)` 或结构体 `struct { field1: A, field2: B }`。

### 4.3 拉回 (Pullback)

- **图表**：索引范畴 $\mathcal{J}$ 是一个"V"字形，$1 \to 3 \leftarrow 2$。函子 $F$ 挑出形如 $A \xrightarrow{f} C \xleftarrow{g} B$ 的图表。
- **极限 (拉回)**：该图表的极限称为**拉回**或**纤维积**，记为 $A \times_C B$。
  - **泛性质**：拉回是一个对象 $P$ 和两个态射 $p_A: P \to A$, $p_B: P \to B$ 组成的锥，满足 $f \circ p_A = g \circ p_B$。并且对于任何其他满足此条件的锥（由 $Z$ 和 $z_A: Z \to A, z_B: Z \to B$ 组成），都存在唯一的态射 $u: Z \to P$ 使整个图表交换。

- **具体范畴中的例子**：
  - **Set**: $A \times_C B = \{(a, b) \in A \times B \mid f(a) = g(b)\}$。它找到了所有"通过 $f$ 和 $g$ 映射到同一个元素"的元素对。

### 4.4 等化子 (Equalizer)

- **图表**：索引范畴 $\mathcal{J}$ 由两个对象和两个平行的态射组成：$1 \rightrightarrows 2$。函子 $F$ 挑出形如 $A \underset{g}{\stackrel{f}{\rightrightarrows}} B$ 的一对态射。
- **极限 (等化子)**：该图表的极限称为**等化子**。它是一个对象 $E$ 和一个态射 $e: E \to A$，使得 $f \circ e = g \circ e$。并且对于任何满足 $f \circ h = g \circ h$ 的态射 $h: Z \to A$，存在唯一的态射 $u: Z \to E$ 使得 $e \circ u = h$。
- **具体范畴中的例子**：
  - **Set**: $E = \{a \in A \mid f(a) = g(a)\}$，即 $f$ 和 $g$ 取值相同的那些元素的集合，而 $e$ 是包含映射。

## 5. 余极限的重要特例

余极限是极限的对偶概念，只需将所有箭头反向即可。

### 5.1 始对象 (Initial Object)

- **对偶于**：终对象。
- **泛性质**：一个对象 $I$，对于任何其他对象 $N$，都存在唯一的态射 $I \to N$。

### 5.2 余乘积 (Coproduct)

- **对偶于**：乘积。
- **泛性质**：对象 $A, B$ 的余乘积 $A + B$ 带有一对注入态射 $i_A: A \to A+B, i_B: B \to A+B$。对于任何其他对象 $Z$ 和一对态射 $f: A \to Z, g: B \to Z$，存在唯一的态射 $u: A+B \to Z$ 使图表交换。
- **具体范畴中的例子**：
  - **Set**: 不交并 (disjoint union)。
  - **Grp**: 自由积 (free product)。
  - **编程**: 和类型（或称变体、枚举），如 `Either A B` 或 `enum { A(A), B(B) }`。

### 5.3 推出 (Pushout)

- **对偶于**：拉回。
- **泛性质**：对于 $A \xleftarrow{f} C \xrightarrow{g} B$ 的图表，其推出是一个对象 $P$ 和两个态射 $i_A: A \to P, i_B: B \to P$，常用于"粘合"两个对象。
- **具体范畴中的例子**：
  - **Top**: 粘合拓扑空间。著名的 Mayer-Vietoris 序列就与推出密切相关。

## 6. 完备性 (Completeness)

一个范畴拥有极限的能力被称为**完备性**。

- **有限完备 (Finitely Complete)**：如果一个范畴拥有所有**有限**图表（即索引范畴 $\mathcal{J}$ 是有限的）的极限。一个重要的结论是：一个范畴是有限完备的，当且仅当它**有终对象和所有拉回**（或等价地，有所有有限乘积和所有等化子）。
- **完备 (Complete)**：如果一个范畴拥有所有**小图表**（即索引范畴 $\mathcal{J}$ 是小范畴）的极限。
- **（有限）余完备**：对偶地，如果一个范畴拥有所有（有限）小图表的余极限。
- **双完备 (Bicocomplete)**：既完备又余完备。

大多数常见的数学范畴，如 **Set**, **Grp**, **Top**, **Vect**，都是双完备的。
