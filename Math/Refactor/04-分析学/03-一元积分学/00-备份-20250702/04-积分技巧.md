# 04-积分技巧

微积分基本定理告诉我们，计算定积分的关键在于找到被积函数的原函数。
但这往往是整个过程中最困难的一步。与求导不同，积分没有一套通用的、一成不变的法则。
它更像是一门艺术，需要观察、经验和尝试。

本节我们介绍两种最核心、最普适的积分技巧：**换元法**和**分部积分法**。

## 1. 换元积分法 (Integration by Substitution)

换元法的本质是求导**链式法则**的逆运算。它通过引入一个新的变量，来简化被积函数，使其更容易被积分。

### 1.1. 第一类换元法（凑微分法）

如果我们能将被积函数 \(f(x)\) 写成 \(g(\phi(x)) \cdot \phi'(x)\) 的形式，那么就可以进行如下换元：
> 令 \(u = \phi(x)\)，则 \(du = \phi'(x)dx\)。
> \[ \int g(\phi(x)) \phi'(x) \,dx = \int g(u) \,du \]
> 我们的目标就是把一个复杂的积分，转化成一个更简单的、可以直接使用基本积分表的积分。

**核心技巧：** "凑微分"。观察被积函数，看是否能将一部分表达式"凑"成另一部分表达式的微分。
**例子：** 计算 \(\int 2x \cos(x^2) \,dx\)

- 我们观察到，\(2x\) 正是 \(x^2\) 的导数。
- 令 \(u = x^2\)，则 \(du = 2x \,dx\)。
- 原积分 = \(\int \cos(u) \,du = \sin(u) + C = \sin(x^2) + C\)。

**例子：** 计算 \(\int \tan x \,dx = \int \frac{\sin x}{\cos x} \,dx\)

- 我们观察到，\(\sin x\) 与 \((\cos x)' = -\sin x\) 只差一个负号。
- 原积分 = \(-\int \frac{-\sin x}{\cos x} \,dx\)。
- 令 \(u = \cos x\)，则 \(du = -\sin x \,dx\)。
- 原积分 = \(-\int \frac{1}{u} \,du = -\ln|u| + C = -\ln|\cos x| + C = \ln|\sec x| + C\)。

### 1.2. 第二类换元法（变量代换）

与第一类换元法方向相反，我们直接令 \(x = \phi(t)\)，从而 \(dx = \phi'(t)dt\)。
> \[ \int f(x) \,dx = \int f(\phi(t)) \phi'(t) \,dt \]
> 这种方法常用于处理含有根式的被积函数，特别是通过**三角换元**来消除根号。

**常见三角换元：**

- 若被积函数含 \(\sqrt{a^2 - x^2}\)，令 \(x = a\sin t\)，则 \(\sqrt{a^2-x^2} = a\cos t\)。
- 若被积函数含 \(\sqrt{a^2 + x^2}\)，令 \(x = a\tan t\)，则 \(\sqrt{a^2+x^2} = a\sec t\)。
- 若被积函数含 \(\sqrt{x^2 - a^2}\)，令 \(x = a\sec t\)，则 \(\sqrt{x^2-a^2} = a\tan t\)。

## 2. 分部积分法 (Integration by Parts)

分部积分法的本质是求导**乘法法则**的逆运算。
> 乘法法则：\((uv)' = u'v + uv'\)
> 对其积分：\(uv = \int u'v \,dx + \int uv' \,dx\)
> 移项整理，得到**分部积分公式**：
> \[ \int u \,dv = uv - \int v \,du \]
> 或者写成：
> \[ \int u(x)v'(x) \,dx = u(x)v(x) - \int v(x)u'(x) \,dx \]

**核心思想：** 将一个较难的积分 \(\int u \,dv\)，转化为一个可能较容易的积分 \(\int v \,du\)。

**选择 \(u\) 和 \(dv\) 的原则：**

1. **\(v\) 要容易求出**：即 \(dv\) 必须是容易积分的。
2. **\(\int v \,du\) 要比 \(\int u \,dv\) 更简单**：通常我们希望 \(u\) 在求导后变得更简单（例如多项式降次），或者 \(v\) 在积分后能与 \(u'\) 更好地"配合"。

**LIATE / LIPET 法则：** 一个选择 \(u\) 的优先级的经验法则。按此顺序，排在前面的函数优先选作 \(u\)。

- **L**: **L**ogarithmic (对数函数), 如 \(\ln x\)
- **I**: **I**nverse trigonometric (反三角函数), 如 \(\arctan x\)
- **A**: **A**lgebraic (代数函数/多项式), 如 \(x^2, 3x+5\)
- **T**: **T**rigonometric (三角函数), 如 \(\sin x, \cos x\)
- **E**: **E**xponential (指数函数), 如 \(e^x\)

**例子：** 计算 \(\int x e^x \,dx\)

- 根据LIATE法则，选择 \(u=x\) (代数), \(dv = e^x dx\) (指数)。
- 则 \(du = dx\)，\(v = \int e^x \,dx = e^x\)。
- 原积分 = \(uv - \int v \,du = x e^x - \int e^x \,dx = x e^x - e^x + C\)。
