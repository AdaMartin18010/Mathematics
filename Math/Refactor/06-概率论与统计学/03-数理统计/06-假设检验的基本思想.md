# 06-假设检验的基本思想

参数估计的目标是“估计一个值”，而**假设检验 (Hypothesis Testing)** 的目标是“做出一个决策”。它是我们利用样本证据来判断关于总体的某个论断是否成立的一套正式流程。

## 1. 假设检验的逻辑：类似法庭审判

假设检验的内在逻辑与法庭审判中的“无罪推定”原则非常相似。

| 法庭审判             | 假设检验               |
| -------------------- | ---------------------- |
| **假设**：被告无罪   | **原假设 ($H_0$)**      |
| **需要寻找的**：有罪证据 | **需要寻找的**：反对$H_0$的证据 |
| **决策依据**：证据强度 | **决策依据**：p 值     |
| **判决**：有罪/无罪  | **结论**：拒绝/不拒绝$H_0$   |

在法庭上，我们先假定被告是无罪的，然后由检察官提供强有力的证据来试图推翻这个假定。在假设检验中，我们也先假定一个“默认”的或“现状”的论断是成立的，然后看样本数据是否提供了足够强烈的、与之矛盾的证据。

这个默认的、我们试图去推翻的论断，就是**原假设 (Null Hypothesis, $H_0$)**。

## 2. 假设检验的核心要素

一个完整的假设检验包含以下几个核心要素：

1. **原假设 (Null Hypothesis, $H_0$)**
    * 它是关于总体参数的一个**默认论断**或**基准状态**。
    * 我们进行检验的目的，就是为了收集证据来**反驳**它。
    * 它总是包含等号（`=`、`<=` 或 `>=`）。例如，$H_0: \mu = 100$。

2. **备择假设 (Alternative Hypothesis, $H_a$ or $H_1$)**
    * 它是我们真正感兴趣的、希望找到证据来**支持**的**研究假设**。
    * 它与原假设是互斥的。
    * 它通常包含不等号（`!=`、`>` 或 `<`）。例如，$H_a: \mu \neq 100$ (双边检验)，或 $H_a: \mu > 100$ (单边检验)。

3. **检验统计量 (Test Statistic)**
    * 这是一个根据样本数据计算出的统计量。
    * 它的作用是衡量样本证据与原假设 $H_0$ 之间的**"矛盾"程度**。一个好的检验统计量，当 $H_0$ 为真时，其值应该接近 0 或某个中心值；当 $H_0$ 不为真时，其值会偏离中心。

## 3. 两类错误

由于我们的决策是基于不完整的样本信息，我们永远无法 100% 确定我们的结论是正确的。我们可能会犯两种错误：

|                    | **真实情况：$H_0$ 为真** | **真实情况：$H_0$ 为假** |
| ------------------ | --------------------------- | --------------------------- |
| **我们的决策：拒绝 $H_0$** | **第一类错误 (Type I Error)** | **正确决策**              |
| **我们的决策：不拒绝 $H_0$** | **正确决策**              | **第二类错误 (Type II Error)** |

* **第一类错误 (弃真错误)**：$H_0$ 本来是真的，但我们却错误地拒绝了它。这就像冤枉了一个无辜的人。我们把犯第一类错误的最大概率记为 $\alpha$，它被称为**显著性水平 (Significance Level)**。
* **第二类错误 (取伪错误)**：$H_0$ 本来是假的，但我们却没有足够的证据来拒绝它。这就像放走了一个有罪的人。我们把犯第二类错误的概率记为 $\beta$。

在实践中，我们**直接控制第一类错误的概率**，即预先设定一个可接受的 $\alpha$ 值（通常是 0.05, 0.01 或 0.10）。$\alpha=0.05$ 意味着我们愿意承担 5% 的风险去冤枉一个"好人"。

## 4. p 值：衡量证据强度的关键

我们如何做出最终决策呢？这就要依靠 **p 值 (p-value)**。

**p 值的定义**：**假设原假设 $H_0$ 为真的前提下，观测到当前样本结果，或者比当前结果更极端的样本结果的概率。**

* p 值是一个**概率值**，范围在 0 到 1 之间。
* p 值越小，说明在 $H_0$ 为真的情况下，我们观测到的样本结果就越"罕见"、越"极端"。
* 因此，**p 值越小，反对 $H_0$ 的证据就越强**。

## 5. 做出决策：比较 p 值与 $\alpha$

假设检验的决策过程非常简单，就是将计算出的 p 值与我们预先设定的显著性水平 $\alpha$ 进行比较。

1. **设定显著性水平 $\alpha$**：在进行检验之前，首先确定我们能容忍的弃真错误率，例如 $\alpha=0.05$。
2. **计算 p 值**：根据样本数据，计算出检验统计量的值，并由此得到 p 值。
3. **做出决策**：
    * 如果 **p 值 $\le \alpha$**：这意味着，在 $H_0$ 为真的情况下，观测到如此极端样本的概率非常小（小于我们设定的容忍底线 $\alpha$）。我们有足够强的证据**拒绝原假设 $H_0$**。这个结果被称为**统计上显著的 (statistically significant)**。
    * 如果 **p 值 $> \alpha$**：这意味着，在 $H_0$ 为真的情况下，观测到的样本结果是相当合理的、不罕见的。我们**没有足够的证据拒绝原假设 $H_0$**。

**重要提示**：我们从不说"接受 $H_0$"。"没有足够的证据拒绝 $H_0$"不等于"$H_0$ 就是对的"。这就像"证据不足，无法判定被告有罪"不等于"证明了被告是无辜的"。这体现了统计决策的严谨性。
