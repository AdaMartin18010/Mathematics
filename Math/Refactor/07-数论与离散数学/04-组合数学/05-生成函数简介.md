---
title: "生成函数简介"
date: 2025-07-04
---

## 1. 什么是生成函数？

生成函数是组合数学中最深刻、最强大的工具之一。它在计数问题和代数之间建立了一座令人惊奇的桥梁。

**核心思想**:
将一个无限的数字序列 $a_0, a_1, a_2, \dots$ "编码"成一个形式幂级数 $A(x)$。
$$ A(x) = a_0 + a_1x + a_2x^2 + a_3x^3 + \dots = \sum_{k=0}^{\infty} a_k x^k $$

- 这个函数 $A(x)$ 就是序列 $\{a_k\}$ 的**生成函数**。
- 我们通常不关心 $x$ 的具体值或级数是否收敛，而是把它当作一个存储序列信息的"数据结构"。
- $x^k$ 的**系数** $a_k$ 存储了我们关心的信息，比如"满足某种条件的、大小为k的组合方式数"。

**为什么这样做有效？**
因为对函数 $A(x)$ 进行的代数运算（如加法、乘法），可以对应到对原组合问题的某种操作（如合并、分解）。我们可以利用熟知的代数技巧来操纵函数，然后通过观察结果函数的系数，来解决原来困难的计数问题。

---

## 2. 一个基本的生成函数

让我们从一个简单的例子开始，理解"编码"的过程。
考虑从集合 $\{a, b, c\}$ 中选取元素。

- **选 a**: 要么不选（对应 $1$ 或 $x^0$），要么选（对应 $x^1$）。我们可以用多项式 $(1+x)$ 来表示对元素 'a' 的选择。
- **选 b**: 同样用 $(1+x)$ 表示。
- **选 c**: 同样用 $(1+x)$ 表示。

如果我们想知道从这3个元素中，选出 $k$ 个组成子集的方法数，可以把这三个多项式相乘：
$$ A(x) = (1+x)(1+x)(1+x) = (1+x)^3 $$

根据二项式定理展开：
$$ A(x) = 1 + 3x + 3x^2 + 1x^3 $$

现在来解读这个结果：

- $x^0$ 的系数是 1：表示选0个元素（空集）的方法有1种。
- $x^1$ 的系数是 3：表示选1个元素（$\{a\}, \{b\}, \{c\}$）的方法有3种。
- $x^2$ 的系数是 3：表示选2个元素（$\{a,b\}, \{a,c\}, \{b,c\}$）的方法有3种。
- $x^3$ 的系数是 1：表示选3个元素（$\{a,b,c\}$）的方法有1种。

看到了吗？这个函数的系数，完美地回答了"从3个元素中选k个的方法数"这个问题。这里的系数 $\binom{3}{k}$ 正是我们熟悉的组合数。

---

## 3. 解决更复杂的问题：找零钱

生成函数的威力在处理有"重复"和"限制"的计数问题时，才真正显现出来。

**问题**:
假设有无限多的1分、2分和5分硬币。要凑成总金额为 $n$ 分，有多少种不同的方法？
令 $a_n$ 为凑成 $n$ 分的方法数。我们想找到序列 $a_0, a_1, a_2, \dots$ 的生成函数 $A(x)$。

- **1分硬币**: 我们可以不选（$1$）、选1个（$x^1$）、选2个（$x^2$）、...。这可以用级数 $1+x+x^2+x^3+\dots$ 来表示。
- **2分硬币**: 我们可以不选（$1$）、选1个（$x^2$）、选2个（$x^4$）、...。这可以用级数 $1+x^2+x^4+x^6+\dots$ 来表示。
- **5分硬币**: 我们可以不选（$1$）、选1个（$x^5$）、选2个（$x^{10}$）、...。这可以用级数 $1+x^5+x^{10}+x^{15}+\dots$ 来表示。

根据乘法原理，总的生成函数是这三个级数的乘积：
$$ A(x) = (1+x+x^2+\dots)(1+x^2+x^4+\dots)(1+x^5+x^{10}+\dots) $$

利用几何级数求和公式 $\frac{1}{1-u} = 1+u+u^2+\dots$：
$$ A(x) = \left( \frac{1}{1-x} \right) \left( \frac{1}{1-x^2} \right) \left( \frac{1}{1-x^5} \right) $$

这个紧凑的函数 $A(x)$ 就是我们问题的答案！虽然我们没有把它展开，但理论上，如果我们把这个函数展开成幂级数，比如 $A(x) = \sum a_n x^n$，那么 $x^n$ 的系数 $a_n$ 就精确地告诉我们凑成 $n$ 分的方法数。

例如，要凑成6分钱，我们需要找 $x^6$ 的系数。它可能来自：

- 6个1分 ($x^6 \cdot 1 \cdot 1$)
- 4个1分, 1个2分 ($x^4 \cdot x^2 \cdot 1$)
- 2个1分, 2个2分 ($x^2 \cdot x^4 \cdot 1$)
- 3个2分 ($1 \cdot x^6 \cdot 1$)
- 1个1分, 1个5分 ($x \cdot 1 \cdot x^5$)
... 等等。将所有这些项相乘，最终 $x^6$ 的系数就是所有方法的总和。

---

## 4. 整数划分问题

整数划分是生成函数应用的另一个经典领域。
**问题**: 将正整数 $n$ 写成若干个正整数之和（顺序无所谓），有多少种方法？
例如，划分4：

- 4
- 3 + 1
- 2 + 2
- 2 + 1 + 1
- 1 + 1 + 1 + 1
共有5种方法。

令 $p(n)$ 为划分 $n$ 的方法数，其生成函数由欧拉发现：
$$ P(x) = \sum_{n=0}^{\infty} p(n)x^n = \prod_{k=1}^{\infty} \frac{1}{1-x^k} = \left(\frac{1}{1-x}\right)\left(\frac{1}{1-x^2}\right)\left(\frac{1}{1-x^3}\right)\dots $$

- **直观理解**:
  - $\frac{1}{1-x} = 1+x+x^2+\dots$ 表示我们可以用任意多个"1"来构成和。
  - $\frac{1}{1-x^2} = 1+x^2+x^4+\dots$ 表示我们可以用任意多个"2"来构成和。
  - ...
  - 将它们相乘，最终 $x^n$ 的系数，就是所有能组合成 $n$ 的方式总数。

## 5. 总结

生成函数是组合学中的一个革命性工具。它将离散的、组合的计数问题，转化为了连续的、代数的函数分析问题。

- **核心是"编码"**: 用一个形式函数的系数来代表一个序列的项。
- **威力在于"运算"**: 对函数进行的代数运算（乘法最常见）直接对应于组合问题的构造过程（分步）。
- **应用领域广泛**：特别适用于解决带约束的组合问题，如找零钱、整数划分等。

虽然完全掌握生成函数需要更深入的数学知识，但理解其基本思想——用函数来"携带"序列信息，并通过代数操作来解决组合问题——是领会现代组合学精髓的关键。

## 国际化对齐补全：生成函数理论与应用（对齐 Wikipedia/EoM）

### 一、生成函数类型

- 普通生成函数（OGF）：A(x)=∑aₙxⁿ
- 指数生成函数（EGF）：A(x)=∑aₙxⁿ/n!
- 泊松生成函数：A(x)=∑aₙxⁿe⁻ˣ/n!

### 二、基本操作

- 加法：(A+B)(x)=A(x)+B(x)
- 乘法：卷积(A*B)(x)=A(x)B(x)
- 复合：A(B(x))（当B(0)=0时）

### 三、递推关系求解

- 线性递推：aₙ₊₂=paₙ₊₁+qaₙ
- 特征方程：x²-px-q=0
- 通解：aₙ=c₁r₁ⁿ+c₂r₂ⁿ

### 四、重要生成函数

- 几何级数：1/(1-x)=∑xⁿ
- 指数函数：eˣ=∑xⁿ/n!
- 二项式：(1+x)ⁿ=∑C(n,k)xᵏ

### 五、应用实例

- 组合计数：排列、组合、分割
- 概率：矩生成函数
- 数论：分拆函数、欧拉函数

### 六、重要例子与反例

- 例子：斐波那契数列F(x)=x/(1-x-x²)
- 例子：卡特兰数C(x)=(1-√(1-4x))/(2x)
- 反例：收敛半径外的生成函数
- 反例：非解析的生成函数

### 七、参考

- Wilf, Generatingfunctionology；Stanley, Enumerative Combinatorics, Vol.1, Ch.1
- [Wikipedia: Generating function](https://en.wikipedia.org/wiki/Generating_function)
- [EoM: Generating function](https://encyclopediaofmath.org/wiki/Generating_function)

> 本节遵循《国际化数学内容标准》与《条目结构模板》。
